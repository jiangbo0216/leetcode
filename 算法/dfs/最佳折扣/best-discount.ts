/*
## é¢˜ç›®æè¿°

æ¨¡æ‹Ÿå•†åœºä¼˜æƒ æ‰“æŠ˜ï¼Œæœ‰ä¸‰ç§[ä¼˜æƒ åˆ¸](https://so.csdn.net/so/search?q=%E4%BC%98%E6%83%A0%E5%88%B8&spm=1001.2101.3001.7020)å¯ä»¥ç”¨ï¼Œæ»¡å‡åˆ¸ã€æ‰“æŠ˜åˆ¸å’Œæ— é—¨æ§›åˆ¸ã€‚

æ»¡å‡åˆ¸ï¼šæ»¡100å‡10ï¼Œæ»¡200å‡20ï¼Œæ»¡300å‡30ï¼Œæ»¡400å‡40ï¼Œä»¥æ­¤ç±»æŽ¨ä¸é™åˆ¶ä½¿ç”¨ï¼›

æ‰“æŠ˜åˆ¸ï¼šå›ºå®šæŠ˜æ‰£92æŠ˜ï¼Œä¸”æ‰“æŠ˜ä¹‹åŽ[å‘ä¸‹å–æ•´](https://so.csdn.net/so/search?q=%E5%90%91%E4%B8%8B%E5%8F%96%E6%95%B4&spm=1001.2101.3001.7020)ï¼Œæ¯æ¬¡è´­ç‰©åªèƒ½ç”¨1æ¬¡ï¼›

æ— é—¨æ§›åˆ¸ï¼šä¸€å¼ åˆ¸å‡5å…ƒï¼Œæ²¡æœ‰ä½¿ç”¨é™åˆ¶ã€‚

æ¯ä¸ªäººç»“è´¦ä½¿ç”¨ä¼˜æƒ åˆ¸æ—¶æœ‰ä»¥ä¸‹é™åˆ¶ï¼š

æ¯äººæ¯æ¬¡åªèƒ½ç”¨ä¸¤ç§ä¼˜æƒ åˆ¸ï¼Œå¹¶ä¸”åŒä¸€ç§ä¼˜æƒ åˆ¸å¿…é¡»ä¸€æ¬¡ç”¨å®Œï¼Œä¸èƒ½è·Ÿåˆ«çš„ç©¿æ’ä½¿ç”¨ï¼ˆæ¯”å¦‚ç”¨ä¸€å¼ æ»¡å‡ï¼Œå†ç”¨ä¸€å¼ æ‰“æŠ˜ï¼Œå†ç”¨ä¸€å¼ æ»¡å‡ï¼Œè¿™ç§é¡ºåºä¸è¡Œï¼‰ã€‚

æ±‚ä¸åŒä½¿ç”¨é¡ºåºä¸‹æ¯ä¸ªäººç”¨å®Œåˆ¸ä¹‹åŽå¾—åˆ°çš„æœ€ä½Žä»·æ ¼å’Œå¯¹åº”ä½¿ç”¨ä¼˜æƒ åˆ¸çš„æ€»æ•°ï¼›å¦‚æžœä¸¤ç§é¡ºåºå¾—åˆ°çš„ä»·æ ¼ä¸€æ ·ä½Žï¼Œå°±å–ä½¿ç”¨ä¼˜æƒ åˆ¸æ•°é‡è¾ƒå°‘çš„é‚£ä¸ªã€‚

## è¾“å…¥æè¿°

ç¬¬ä¸€è¡Œä¸‰ä¸ªæ•°å­—m,n,kï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªäººå¯ä»¥ä½¿ç”¨çš„æ»¡å‡åˆ¸ã€æ‰“æŠ˜åˆ¸å’Œæ— é—¨æ§›åˆ¸çš„æ•°é‡;

ç¬¬äºŒè¡Œä¸€ä¸ªæ•°å­—x, è¡¨ç¤ºæœ‰å‡ ä¸ªäººè´­ç‰©;

åŽé¢xè¡Œæ•°å­—ï¼Œä¾æ¬¡è¡¨ç¤ºæ˜¯è¿™å‡ ä¸ªäººæ‰“æŠ˜ä¹‹å‰çš„å•†å“æ€»ä»·ã€‚

## è¾“å‡ºæè¿°

è¾“å‡ºæ¯ä¸ªäººä½¿ç”¨åˆ¸ä¹‹åŽçš„æœ€ä½Žä»·æ ¼å’Œå¯¹åº”ä½¿ç”¨ä¼˜æƒ åˆ¸çš„æ•°é‡

### ç¤ºä¾‹1

è¾“å…¥

ç¬¬ä¸€è¡Œä¸‰ä¸ªæ•°å­—m,n,kï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªäººå¯ä»¥ä½¿ç”¨çš„æ»¡å‡åˆ¸ã€æ‰“æŠ˜åˆ¸å’Œæ— é—¨æ§›åˆ¸çš„æ•°é‡ã€‚

3 2 5

3

100

200

400

è¾“å‡º

65 6

135 8

275 8

### è¯´æ˜Ž

ç¬¬ä¸€ä¸ªäººä½¿ç”¨ 1 å¼ æ»¡å‡åˆ¸å’Œ5å¼ æ— é—¨æ§›åˆ¸ä»·æ ¼æœ€ä½Žã€‚ï¼ˆ100-10=90, 90-5\*5=65ï¼‰

ç¬¬äºŒä¸ªäººä½¿ç”¨ 3 å¼ æ»¡å‡åˆ¸å’Œ5å¼ æ— é—¨æ§›åˆ¸ä»·æ ¼æœ€ä½Žã€‚ï¼ˆ200-20-10-10=160, 160 â€“ 5\*5 = 135ï¼‰

ç¬¬ä¸‰ä¸ªäººä½¿ç”¨ 3 å¼ æ»¡å‡åˆ¸å’Œ5å¼ æ— é—¨æ§›åˆ¸ä»·æ ¼æœ€ä½Žã€‚ï¼ˆ400-40-30-30=300, 300 â€“ 5\*5=275ï¼‰
*/

export function bestDiscount(coupon: number[], totalPrices: number[]) {
  // å…ˆåˆ¤æ–­æ˜¯å…ˆæ‰“æŠ˜è¿˜æ˜¯æ»¡å‡

  function cut (couponNum: number, price: number) {
    let usedCouponNum = 0
    while (couponNum > 0) {
      if (price >= 400) {
        price -= 40
      } else if (price >= 300) {
        price -= 30
      } else if (price >= 200) {
        price -= 20
      } else if (price >= 100) {
        price -= 10
      } else {
        break
      }
      couponNum--
      usedCouponNum++
    }
    return [usedCouponNum, price]
  }

  function cutWithout (couponNum: number, price: number) {
    return [couponNum, price - couponNum * 5]
  }

  function sale (couponNum: number, price: number) {
    return [couponNum > 0 ? 1 : 0, ~~(price * 0.92)]
  }

  let result = []
  for (const totalPrice of totalPrices) {
    let finalPrice = 0
    let finalUsedCoupon = 0
    let priceByCut = cut(coupon[0], totalPrice)
    let priceBySale = sale(coupon[1], totalPrice)
    let priceByCutWithout = [0, 0]

    // function (params:type) {
      
    // }
  
    // è¿™é‡Œå†™çš„å¤ªå†—é•¿äº†ï¼ŒðŸ˜„
    if (priceByCut[1] > priceBySale[1]) {
      finalUsedCoupon = priceBySale[0]
      finalPrice = priceBySale[1]
      priceByCut =  cut(coupon[0], finalPrice)
      priceByCutWithout = cutWithout(coupon[2], finalPrice)
      
      if (priceByCut[1] > priceByCutWithout[1]) {
        finalUsedCoupon += priceByCutWithout[0]
        finalPrice = priceByCutWithout[1]
      } else if (priceByCut[1] < priceByCutWithout[1]) {
        finalUsedCoupon += priceByCut[0]
        finalPrice = priceByCut[1]
      } else {
        finalUsedCoupon += priceByCut[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceByCut[0]
        finalPrice = priceByCut[1]
      }
    } else if (priceByCut[1] < priceBySale[1]){
      finalUsedCoupon = priceByCut[0]
      finalPrice = priceByCut[1]

      priceBySale =  sale(coupon[1], finalPrice)
      priceByCutWithout = cutWithout(coupon[2], finalPrice)
      
      if (priceBySale[1] > priceByCutWithout[1]) {
        finalUsedCoupon += priceByCutWithout[0]
        finalPrice = priceByCutWithout[1]
      } else if (priceBySale[1] < priceByCutWithout[1]) {
        finalUsedCoupon += priceBySale[0]
        finalPrice = priceBySale[1]
      } else {
        finalUsedCoupon += priceBySale[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceBySale[0]
        finalPrice = priceBySale[1]
      }
    } else {
      finalPrice = priceByCut[1]
      if (priceByCut[0] === priceBySale[0]) {
        finalUsedCoupon = priceBySale[0]

        priceBySale =  sale(coupon[1], finalPrice)
        priceByCutWithout = cutWithout(coupon[2], finalPrice)
        priceByCut = cut(coupon[0], finalPrice)
        
        if (priceByCut[1] > priceByCutWithout[1]) {
          finalUsedCoupon += priceByCutWithout[0]
          finalPrice = priceByCutWithout[1]

        } else if (priceByCut[1] < priceByCutWithout[1]) {

            finalUsedCoupon += priceByCut[0]
            finalPrice = priceByCut[1]
        } else {
          finalUsedCoupon += priceByCut[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceByCut[0]
          finalPrice = priceBySale[1]
        }

        if (priceByCut[1] > priceByCutWithout[1]) {
          finalUsedCoupon += priceByCutWithout[0]
          finalPrice = priceByCutWithout[1]
        } else if (priceByCut[1] < priceByCutWithout[1]) {
          finalUsedCoupon += priceByCut[0]
          finalPrice = priceByCut[1]
        } else {
          finalUsedCoupon += priceByCut[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceByCut[0]
          finalPrice = priceByCut[1]
        }
      } else {
        if (priceByCut[0] > priceBySale[0]) {
          priceByCut =  cut(coupon[0], finalPrice)
          priceByCutWithout = cutWithout(coupon[2], finalPrice)
          
          if (priceByCut[1] > priceByCutWithout[1]) {
            finalUsedCoupon += priceByCutWithout[0]
            finalPrice = priceByCutWithout[1]
          } else if (priceByCut[1] < priceByCutWithout[1]) {
            finalUsedCoupon += priceByCut[0]
            finalPrice = priceByCut[1]
          } else {
            finalUsedCoupon += priceByCut[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceByCut[0]
            finalPrice = priceByCut[1]
          }
        } else {
          priceBySale =  sale(coupon[1], finalPrice)
          priceByCutWithout = cutWithout(coupon[2], finalPrice)
          
          if (priceBySale[1] > priceByCutWithout[1]) {
            finalUsedCoupon += priceByCutWithout[0]
            finalPrice = priceByCutWithout[1]
          } else if (priceBySale[1] < priceByCutWithout[1]) {
            finalUsedCoupon += priceBySale[0]
            finalPrice = priceBySale[1]
          } else {
            finalUsedCoupon += priceBySale[0] > priceByCutWithout[0] ? priceByCutWithout[0] : priceBySale[0]
            finalPrice = priceBySale[1]
          }
        }
      }


    }


    result.push([finalPrice, finalUsedCoupon])
  }
  return result
}